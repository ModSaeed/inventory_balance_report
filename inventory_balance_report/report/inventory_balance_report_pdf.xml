<odoo>
  <template id="inventory_report_pdf" name="Inventory Report PDF Template" t-name="inventory_balance_report.inventory_report_pdf">
    <t t-call="web.html_container">
      <t t-call="web.external_layout">
        <div class="page">
          <div style="margin-bottom: 20px;">
                  <h3 style="color: #155724; white-space: normal; word-break: break-word; line-height: 1.6;">
                    Inventory Balance Report<br/>
                    Period:
                    From <t t-esc="docs.date_from.strftime('%Y-%m-%d')"/>
                    To <t t-esc="docs.date_to.strftime('%Y-%m-%d')"/>
                  </h3>
          </div>
          <table class="table table-sm table-bordered" style="width: 100%;">
            <thead>
              <tr>
                  <th>Location</th>
                  <th>Product</th>
                  <th>Unit</th>
                  <th>Opening Quantity</th>
                  <th>Incoming</th>
                  <th>Outgoing</th>
                  <th>Current Balance</th>
              </tr>
            </thead>
            <tbody>
<!--              <t t-foreach="request.env['inventory.report.line'].search([])" t-as="line">-->
                <t t-foreach="request.env['inventory.report.line'].search([], order='location_id, product_id')" t-as="line">
                    <tr>
                      <td><t t-esc="line.location_id.name"/></td>
                      <td><t t-esc="line.product_id.display_name"/></td>
                      <td><t t-esc="line.product_uom.name"/></td>
                      <td><t t-esc="line.opening_qty"/></td>
                      <td><t t-esc="line.in_qty"/></td>
                      <td><t t-esc="line.out_qty"/></td>
                      <td><t t-esc="line.balance"/></td>
                    </tr>
              </t>
            </tbody>
          </table>
        </div>
      </t>
    </t>
  </template>

  <record id="inventory_report_pdf_action" model="ir.actions.report">
        <field name="name">Inventory Balance Report PDF</field>
        <field name="model">inventory.report.wizard</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">inventory_balance_report.inventory_report_pdf</field>
        <field name="report_file">inventory_balance_report.inventory_report_pdf</field>
        <field name="print_report_name">'Inventory Balance Report - %s' % (object.date_to.strftime('%Y-%m-%d'))</field>
        <field name="binding_model_id" ref="model_inventory_report_wizard"/>
        <field name="binding_type">report</field>
    </record>

</odoo>
